{"ast":null,"code":"import _objectSpread from \"/Users/habitat/Desktop/share-bus/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/habitat/Desktop/share-bus/src/page/user/index.js\";\nimport React from 'react';\nimport { DatePicker, Radio, Input, Select, Modal, Card, Button, Form, Table } from 'antd';\nimport axios from './../../axios';\nimport Utils from './../../utils/utils';\nimport FilterForm from './../../components/baseform';\nimport moment from 'moment';\nconst FormItem = Form.Item;\nconst Option = Select.Option;\nconst RadioGroup = Radio.Group;\nconst TextArea = Input.TextArea;\nexport default class User extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      list: [],\n      pagination: {},\n      selectedRowKeys: '',\n      selectedRowItem: {},\n      selectedIds: '',\n      selectedRows: [],\n      isVisible: false,\n      userInfo: ''\n    };\n    this.params = {\n      page: 1,\n      params: {}\n    };\n\n    this.onRowClick = (record, index) => {\n      console.log('111');\n      console.log(record, index);\n      let selectedRowKeys = [index];\n      this.setState({\n        selectedRowKeys,\n        selectedRowItem: record\n      });\n    };\n\n    this.formList = [{\n      type: 'SELECT',\n      label: 'åŸå¸‚',\n      field: 'city_id',\n      placeholder: 'å…¨éƒ¨',\n      width: 80,\n      initialValue: '1',\n      list: [{\n        id: '0',\n        name: 'å…¨éƒ¨'\n      }, {\n        id: '1',\n        name: 'åŒ—äº¬'\n      }, {\n        id: '2',\n        name: 'å¤©æ´¥'\n      }, {\n        id: '3',\n        name: 'æ­å·'\n      }]\n    }, {\n      type: 'INPUT',\n      label: 'ç”¨æˆ·å',\n      field: 'user_name',\n      placeholder: 'è¯·è¾“å…¥ç”¨æˆ·åç§°',\n      width: 80\n    }, {\n      type: 'INPUT',\n      label: 'æ‰‹æœºå·',\n      field: 'user_mobile',\n      placeholder: 'è¯·è¾“å…¥ç”¨æˆ·æ‰‹æœºå·',\n      width: 80\n    }, {\n      type: 'DATE',\n      label: 'è¯·é€‰æ‹©å…¥èŒæ—¥æœŸ',\n      field: 'user_date',\n      placeholder: 'è¯·è¾“å…¥æ—¥æœŸ',\n      width: 80\n    }];\n\n    this.handleFormSubmit = params => {\n      this.params.params = params;\n      this.requestList();\n    };\n\n    this.requestList = () => {\n      axios.requestList(this, '/user/list', this.params);\n    };\n\n    this.handleOperate = type => {\n      let item = this.state.selectedRowItem;\n      console.log(item);\n\n      if (type === 'add') {\n        this.setState({\n          type,\n          isVisible: true,\n          title: 'åˆ›å»ºå‘˜å·¥'\n        });\n      } else if (type === 'edit') {\n        if (Object.keys(item).length === 0) {\n          Modal.info({\n            title: 'æç¤º',\n            content: 'è¯·é€‰æ‹©ä¸€ä¸ªç”¨æˆ·'\n          });\n          return;\n        }\n\n        this.setState({\n          type,\n          isVisible: true,\n          title: 'ç¼–è¾‘å‘˜å·¥',\n          userInfo: item\n        });\n      } else if (type === 'detail') {\n        this.setState({\n          type,\n          isVisible: true,\n          title: 'å‘˜å·¥è¯¦æƒ…',\n          userInfo: item\n        });\n      } else if (type === 'delete') {\n        if (Object.keys(item).length === 0) {\n          Modal.info({\n            title: 'æç¤º',\n            content: 'è¯·é€‰æ‹©ä¸€ä¸ªç”¨æˆ·'\n          });\n          return;\n        }\n\n        Modal.confirm({\n          title: 'ç¡®è®¤åˆ é™¤',\n          content: \"\\u662F\\u5426\\u8981\\u5220\\u9664\\u5458\\u5DE5: \".concat(item.username),\n          onOk: () => {\n            axios.ajax({\n              url: '/user/delete',\n              data: {\n                params: {\n                  id: item.id\n                }\n              }\n            }).then(res => {\n              if (res.code === 0) {\n                this.setState({\n                  isVisible: false\n                });\n              }\n\n              this.requestList();\n            });\n          }\n        });\n      }\n    };\n\n    this.handleSubmit = () => {\n      let type = this.state.type;\n      let data = this.userForm.props.form.getFieldsValue(); // æˆ–è€…æ˜¯validateFields\n      // this.userForm æŒ‡çš„æ˜¯ wrappedComponentRef æŒ‚è½½åˆ°çš„é‚£ä¸ªå¯¹è±¡ é‡Œé¢æœ‰å½“å‰å¯¹è±¡çš„æ‰€æœ‰å±æ€§\n      // åˆ›å»ºä¹‹åè¡¨å•æœªæ¸…ç©ºï¼Œåˆ™éœ€è¦åœ¨Modalå¼¹çª—çš„onCancelæ—¶é—´å‘ç”Ÿæ—¶ï¼Œæ¸…ç©ºè¡¨å•\n\n      axios.ajax({\n        url: type === 'add' ? '/user/add' : '/user/edit',\n        data: {\n          params: data\n        }\n      }).then(res => {\n        // æµ‹è¯•ç¼–è¾‘ä¸­çš„è¡¨å•çš„æ˜¾ç¤ºé—®é¢˜\n        if (type === 'edit') {\n          let userInfo = this.state.userInfo;\n          console.log('userinfo look look');\n          console.log(userInfo);\n          console.log('å…ˆæ‰“å°dataçœ‹ä¸€ä¸‹');\n          console.log(data);\n          userInfo = Object.assign({}, _objectSpread({}, userInfo), data);\n          console.log('åˆå¹¶ä¹‹å');\n          console.log(userInfo);\n          this.setState({\n            userInfo,\n            isVisible: false\n          });\n          return;\n        }\n\n        if (res.code == 0) {\n          this.setState({\n            isVisible: false\n          });\n        }\n\n        console.log('æ‰“å°å½“å‰ä¿®æ”¹é¡¹');\n        console.log(this.state.userInfo); // this.requestList()\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.requestList();\n  } // è¡¨æ ¼å•è¡Œç‚¹å‡»\n  // ä½œç”¨ï¼š 1.å­˜è¯¥æ¡æ•°æ® selectedItem,\n  // 2. selectedId ==> å¯¹åº” rowSelection ä¸­çš„ selectedRowKeys\n\n\n  render() {\n    let footer = {};\n\n    if (this.state.type === 'detail') {\n      footer = {\n        footer: null\n      };\n    }\n\n    const rowSelection = {\n      type: 'radio',\n      selectedRowKeys: this.state.selectedRowKeys,\n      onChange: (selectedRowKeys, selectedRows) => {\n        console.log('on change selectedRowKeys');\n        console.log(selectedRowKeys);\n        let ids = [];\n        selectedRows.map(item => {\n          ids.push(item.id);\n        });\n        this.setState({\n          selectedRowKeys,\n          // è¿™ä¸ªæ˜¯å¿…é¡»çš„\n          selectedIds: ids,\n          // é™„åŠ çš„\n          selectedRows: selectedRows // å¤šé€‰æ—¶ æŠŠé€‰ä¸­çš„æ‰€æœ‰æ•°æ®å­˜èµ·æ¥ æ–¹ä¾¿ç®¡ç† onRow ä¼šå­˜å•æ¡æ•°æ®\n\n        });\n      }\n    };\n    const columns = [{\n      title: 'id',\n      dataIndex: 'id'\n    }, {\n      title: 'ç”¨æˆ·å',\n      dataIndex: 'username'\n    }, {\n      title: 'æ€§åˆ«',\n      dataIndex: 'sex',\n      render: sex => {\n        return sex === 1 ? 'ç”·' : 'å¥³';\n      }\n    }, {\n      title: 'çŠ¶æ€',\n      dataIndex: 'state',\n      render: state => {\n        return {\n          '1': 'aaa',\n          '2': 'bbb',\n          '3': 'ccc',\n          '4': 'ddd',\n          '5': 'heelo'\n        }[state];\n      }\n    }, {\n      title: 'çˆ±å¥½',\n      dataIndex: 'interest',\n      render: state => {\n        return {\n          '1': 'aaa',\n          '2': 'bbb',\n          '3': 'ccc',\n          '4': 'ddd',\n          '5': 'aaa',\n          '6': 'bbb',\n          '7': 'ccc',\n          '8': 'ddd'\n        }[state];\n      }\n    }, {\n      title: 'ç”Ÿæ—¥',\n      dataIndex: 'birthday'\n    }, {\n      title: 'è”ç³»åœ°å€',\n      dataIndex: 'address'\n    }, {\n      title: 'æ—©èµ·æ—¶é—´',\n      dataIndex: 'time'\n    }];\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, React.createElement(FilterForm, {\n      formList: this.formList,\n      filterSubmit: this.handleFormSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    })), React.createElement(Card, {\n      className: \"operate-wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"primary\",\n      icon: \"plus\",\n      onClick: () => {\n        this.handleOperate('add');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, \"\\u521B\\u5EFA\\u5458\\u5DE5\"), React.createElement(Button, {\n      type: \"primary\",\n      icon: \"edit\",\n      onClick: () => {\n        this.handleOperate('edit');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, \"\\u7F16\\u8F91\\u5458\\u5DE5\"), React.createElement(Button, {\n      type: \"primary\",\n      onClick: () => {\n        this.handleOperate('detail');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, \"\\u5458\\u5DE5\\u8BE6\\u60C5\"), React.createElement(Button, {\n      type: \"danger\",\n      icon: \"delete\",\n      onClick: () => {\n        this.handleOperate('delete');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, \"\\u5220\\u9664\\u5458\\u5DE5\")), React.createElement(\"div\", {\n      className: \"content-wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, React.createElement(Table, {\n      bordered: true,\n      columns: columns,\n      dataSource: this.state.list,\n      pagination: this.state.pagination,\n      rowSelection: rowSelection,\n      onRow: (record, index) => {\n        return {\n          onClick: () => {\n            // row å½“å‰è¡Œè¢«ç‚¹å‡»ä¹‹åçš„å›è°ƒ\n            this.onRowClick(record, index);\n          }\n        };\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    })), React.createElement(Modal, Object.assign({\n      title: this.state.title,\n      visible: this.state.isVisible,\n      onOk: this.handleSubmit,\n      onCancel: () => {\n        this.setState({\n          isVisible: false\n        }, () => {\n          setTimeout( // è¿™æ ·æ§åˆ¶ç‚¹å‡»éšè—æ—¶ å¯ä»¥ä¸è®©æ•°æ®ç›´æ¥æ¶ˆå¤±`\n          this.userForm.props.form.resetFields, 500);\n        });\n      }\n    }, footer, {\n      width: 600,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }), React.createElement(UserForms, {\n      userInfo: this.state.userInfo,\n      type: this.state.type,\n      wrappedComponentRef: inst => {\n        this.userForm = inst;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    })));\n  }\n\n}\n\nclass UserForm extends React.Component {\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    let type = this.props.type;\n    let userInfo = this.props.userInfo || {}; // å¦‚æœæ˜¯æ°´å¹³å¸ƒå±€ å°±éœ€è¦ç”¨åˆ°æ …æ ¼å¸ƒå±€\n\n    const formItemLayout = {\n      labelCol: {\n        span: 5\n      },\n      wrapperCol: {\n        span: 15\n      }\n    };\n    return React.createElement(Form, {\n      layout: \"horizontal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, React.createElement(FormItem, Object.assign({\n      label: \"\\u7528\\u6237\\u540D\"\n    }, formItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }), type === 'detail' ? userInfo.username : getFieldDecorator('username', {\n      initialValue: userInfo.username\n    })(React.createElement(Input, {\n      type: \"text\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }))), React.createElement(FormItem, Object.assign({\n      label: \"\\u6027\\u522B\"\n    }, formItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }), type === 'detail' ? userInfo.sex : getFieldDecorator('sex', {\n      initialValue: userInfo.sex\n    })(React.createElement(RadioGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369\n      },\n      __self: this\n    }, React.createElement(Radio, {\n      value: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370\n      },\n      __self: this\n    }, \"\\u7537\"), React.createElement(Radio, {\n      value: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, \"\\u5973\")))), React.createElement(FormItem, Object.assign({\n      label: \"\\u72B6\\u6001\"\n    }, formItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376\n      },\n      __self: this\n    }), type === 'detail' ? userInfo.state : getFieldDecorator('state', {\n      initialValue: userInfo.state\n    })(React.createElement(Select, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }, React.createElement(Option, {\n      value: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }, \"\\uD83D\\uDC24\"), React.createElement(Option, {\n      value: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }, \"\\uD83D\\uDC22\"), React.createElement(Option, {\n      value: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, \"\\uD83D\\uDC12\")))), React.createElement(FormItem, Object.assign({\n      label: \"\\u751F\\u65E5\"\n    }, formItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390\n      },\n      __self: this\n    }), type === 'detail' ? userInfo.birthday : getFieldDecorator('birthday', {\n      initialValue: moment(userInfo.birthday)\n    })(React.createElement(DatePicker, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396\n      },\n      __self: this\n    }))), React.createElement(FormItem, Object.assign({\n      label: \"\\u8054\\u7CFB\\u5730\\u5740\"\n    }, formItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400\n      },\n      __self: this\n    }), type === 'detail' ? userInfo.address : getFieldDecorator('address', {\n      initialValue: userInfo.address\n    })(React.createElement(TextArea, {\n      rows: 3,\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u8054\\u7CFB\\u5730\\u5740\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nconst UserForms = Form.create()(UserForm);","map":{"version":3,"sources":["/Users/habitat/Desktop/share-bus/src/page/user/index.js"],"names":["React","DatePicker","Radio","Input","Select","Modal","Card","Button","Form","Table","axios","Utils","FilterForm","moment","FormItem","Item","Option","RadioGroup","Group","TextArea","User","Component","state","list","pagination","selectedRowKeys","selectedRowItem","selectedIds","selectedRows","isVisible","userInfo","params","page","onRowClick","record","index","console","log","setState","formList","type","label","field","placeholder","width","initialValue","id","name","handleFormSubmit","requestList","handleOperate","item","title","Object","keys","length","info","content","confirm","username","onOk","ajax","url","data","then","res","code","handleSubmit","userForm","props","form","getFieldsValue","assign","componentDidMount","render","footer","rowSelection","onChange","ids","map","push","columns","dataIndex","sex","onClick","setTimeout","resetFields","inst","UserForm","getFieldDecorator","formItemLayout","labelCol","span","wrapperCol","birthday","address","UserForms","create"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {DatePicker, Radio, Input, Select, Modal, Card, Button, Form, Table} from 'antd'\nimport axios from './../../axios'\nimport Utils from './../../utils/utils'\nimport FilterForm from './../../components/baseform'\nimport moment from 'moment'\n\nconst FormItem = Form.Item\nconst Option = Select.Option\nconst RadioGroup = Radio.Group\nconst TextArea = Input.TextArea\n\nexport default class User extends React.Component {\n\n  state = {\n    list: [],\n    pagination: {},\n    selectedRowKeys: '',\n    selectedRowItem: {},\n    selectedIds: '',\n    selectedRows: [],\n    isVisible: false,\n    userInfo: ''\n  }\n\n  params = {\n    page: 1,\n    params: {}\n  }\n\n  componentDidMount() {\n    this.requestList()\n  }\n\n  // è¡¨æ ¼å•è¡Œç‚¹å‡»\n  // ä½œç”¨ï¼š 1.å­˜è¯¥æ¡æ•°æ® selectedItem,\n  // 2. selectedId ==> å¯¹åº” rowSelection ä¸­çš„ selectedRowKeys\n  onRowClick = (record, index) => {\n    console.log('111')\n    console.log(record, index)\n    let selectedRowKeys = [index]\n    this.setState({\n      selectedRowKeys,\n      selectedRowItem: record\n    })\n  }\n\n    formList = [\n      {\n        type: 'SELECT',\n        label: 'åŸå¸‚',\n        field: 'city_id',\n        placeholder: 'å…¨éƒ¨',\n        width: 80,\n        initialValue: '1',\n        list: [\n          {id: '0', name: 'å…¨éƒ¨'},\n          {id: '1', name: 'åŒ—äº¬'},\n          {id: '2', name: 'å¤©æ´¥'},\n          {id: '3', name: 'æ­å·'}\n        ]\n      },\n    {\n      type: 'INPUT',\n      label: 'ç”¨æˆ·å',\n      field: 'user_name',\n      placeholder: 'è¯·è¾“å…¥ç”¨æˆ·åç§°',\n      width: 80,\n    },\n    {\n      type: 'INPUT',\n      label: 'æ‰‹æœºå·',\n      field: 'user_mobile',\n      placeholder: 'è¯·è¾“å…¥ç”¨æˆ·æ‰‹æœºå·',\n      width: 80,\n    },\n    {\n      type: 'DATE',\n      label: 'è¯·é€‰æ‹©å…¥èŒæ—¥æœŸ',\n      field: 'user_date',\n      placeholder: 'è¯·è¾“å…¥æ—¥æœŸ',\n      width: 80,\n    }\n  ]\n\n  handleFormSubmit = (params) => {\n    this.params.params = params\n    this.requestList()\n  }\n\n  requestList = () => {\n    axios.requestList(this, '/user/list', this.params)\n  }\n\n  // å¤„ç†å¢åˆ æ”¹æŸ¥\n  handleOperate = (type) => {\n    let item = this.state.selectedRowItem\n    console.log(item)\n    if (type === 'add') {\n      this.setState({\n        type,\n        isVisible: true,\n        title: 'åˆ›å»ºå‘˜å·¥'\n      })\n    } else if (type === 'edit') {\n      if (Object.keys(item).length === 0) {\n        Modal.info({\n          title: 'æç¤º',\n          content: 'è¯·é€‰æ‹©ä¸€ä¸ªç”¨æˆ·'\n        })\n        return\n      }\n      this.setState({\n        type,\n        isVisible: true,\n        title: 'ç¼–è¾‘å‘˜å·¥',\n        userInfo: item\n      })\n    } else if (type === 'detail') {\n      this.setState({\n        type,\n        isVisible: true,\n        title: 'å‘˜å·¥è¯¦æƒ…',\n        userInfo: item\n      })\n    } else if (type === 'delete') {\n      if (Object.keys(item).length === 0) {\n        Modal.info({\n          title: 'æç¤º',\n          content: 'è¯·é€‰æ‹©ä¸€ä¸ªç”¨æˆ·'\n        })\n        return\n      }\n      Modal.confirm({\n        title: 'ç¡®è®¤åˆ é™¤',\n        content: `æ˜¯å¦è¦åˆ é™¤å‘˜å·¥: ${ item.username}`,\n        onOk: () => {\n          axios.ajax({\n            url: '/user/delete',\n            data: {\n              params: {\n                id: item.id\n              }\n            }\n          }).then((res) => {\n            if (res.code === 0) {\n              this.setState({\n                isVisible: false\n              })\n            }\n            this.requestList()\n          })\n        }\n      })\n    }\n  }\n\n  // åˆ›å»ºå‘˜å·¥æäº¤\n  handleSubmit = () => {\n    let type = this.state.type\n    let data = this.userForm.props.form.getFieldsValue() // æˆ–è€…æ˜¯validateFields\n    // this.userForm æŒ‡çš„æ˜¯ wrappedComponentRef æŒ‚è½½åˆ°çš„é‚£ä¸ªå¯¹è±¡ é‡Œé¢æœ‰å½“å‰å¯¹è±¡çš„æ‰€æœ‰å±æ€§\n    // åˆ›å»ºä¹‹åè¡¨å•æœªæ¸…ç©ºï¼Œåˆ™éœ€è¦åœ¨Modalå¼¹çª—çš„onCancelæ—¶é—´å‘ç”Ÿæ—¶ï¼Œæ¸…ç©ºè¡¨å•\n    axios.ajax({\n      url: type === 'add' ? '/user/add' : '/user/edit',\n      data: {\n        params: data\n      }\n    }).then((res) => {\n      // æµ‹è¯•ç¼–è¾‘ä¸­çš„è¡¨å•çš„æ˜¾ç¤ºé—®é¢˜\n      if (type === 'edit') {\n        let userInfo = this.state.userInfo\n        console.log('userinfo look look')\n        console.log(userInfo)\n        console.log('å…ˆæ‰“å°dataçœ‹ä¸€ä¸‹')\n        console.log(data)\n        userInfo = Object.assign({}, {...userInfo}, data)\n        console.log('åˆå¹¶ä¹‹å')\n        console.log(userInfo)\n        this.setState({\n          userInfo,\n          isVisible: false\n        })\n        return\n      }\n      if (res.code == 0) {\n        this.setState({\n          isVisible: false\n        })\n      }\n      console.log('æ‰“å°å½“å‰ä¿®æ”¹é¡¹')\n      console.log(this.state.userInfo)\n      // this.requestList()\n    })\n  }\n\n\n\n  render() {\n\n    let footer = {}\n    if (this.state.type === 'detail') {\n      footer = {\n        footer: null\n      }\n    }\n\n    const rowSelection = {\n      type: 'radio',\n      selectedRowKeys: this.state.selectedRowKeys,\n      onChange: (selectedRowKeys, selectedRows) => {\n        console.log('on change selectedRowKeys')\n        console.log(selectedRowKeys)\n        let ids = []\n        selectedRows.map(item => {\n          ids.push(item.id)\n        })\n        this.setState({\n          selectedRowKeys, // è¿™ä¸ªæ˜¯å¿…é¡»çš„\n          selectedIds: ids, // é™„åŠ çš„\n          selectedRows: selectedRows // å¤šé€‰æ—¶ æŠŠé€‰ä¸­çš„æ‰€æœ‰æ•°æ®å­˜èµ·æ¥ æ–¹ä¾¿ç®¡ç† onRow ä¼šå­˜å•æ¡æ•°æ®\n        })\n      }\n    }\n    const columns = [\n      {\n        title: 'id',\n        dataIndex: 'id'\n      },\n      {\n        title: 'ç”¨æˆ·å',\n        dataIndex: 'username'\n      },\n      {\n        title: 'æ€§åˆ«',\n        dataIndex: 'sex',\n        render: (sex) => {\n          return sex === 1 ? 'ç”·' : 'å¥³'\n        }\n      },\n      {\n        title: 'çŠ¶æ€',\n        dataIndex: 'state',\n        render: (state) => {\n          return {\n            '1': 'aaa',\n            '2': 'bbb',\n            '3': 'ccc',\n            '4': 'ddd',\n            '5': 'heelo'\n          }[state]\n        }\n      },\n      {\n        title: 'çˆ±å¥½',\n        dataIndex: 'interest',\n        render: (state) => {\n          return {\n            '1': 'aaa',\n            '2': 'bbb',\n            '3': 'ccc',\n            '4': 'ddd',\n            '5': 'aaa',\n            '6': 'bbb',\n            '7': 'ccc',\n            '8': 'ddd'\n          }[state]\n        }\n      },\n      {\n        title: 'ç”Ÿæ—¥',\n        dataIndex: 'birthday'\n      },\n      {\n        title: 'è”ç³»åœ°å€',\n        dataIndex: 'address'\n      },\n      {\n        title: 'æ—©èµ·æ—¶é—´',\n        dataIndex: 'time'\n      }\n    ]\n    return (\n      <div>\n        <Card>\n          <FilterForm formList={this.formList} filterSubmit={this.handleFormSubmit} />\n        </Card>\n        <Card className='operate-wrap'>\n          <Button type='primary' icon='plus' onClick={() => { this.handleOperate('add')}}>åˆ›å»ºå‘˜å·¥</Button>\n          <Button type='primary' icon='edit' onClick={() => { this.handleOperate('edit')}}>ç¼–è¾‘å‘˜å·¥</Button>\n          <Button type='primary' onClick={() => { this.handleOperate('detail')}}>å‘˜å·¥è¯¦æƒ…</Button>\n          <Button type='danger' icon='delete' onClick={() => { this.handleOperate('delete')}}>åˆ é™¤å‘˜å·¥</Button>\n        </Card>\n        <div className='content-wrap'>\n          <Table\n            bordered\n            columns={columns}\n            dataSource={this.state.list}\n            pagination={this.state.pagination}\n            rowSelection={rowSelection}\n            onRow={(record, index) => {\n              return {\n                onClick: () => { // row å½“å‰è¡Œè¢«ç‚¹å‡»ä¹‹åçš„å›è°ƒ\n                  this.onRowClick(record, index)\n                }\n              }\n            }}\n          />\n        </div>\n\n        <Modal\n          title={this.state.title}\n          visible={this.state.isVisible}\n          onOk={this.handleSubmit}\n          onCancel={() => {\n            this.setState({\n              isVisible: false\n            }, () => {\n              setTimeout( // è¿™æ ·æ§åˆ¶ç‚¹å‡»éšè—æ—¶ å¯ä»¥ä¸è®©æ•°æ®ç›´æ¥æ¶ˆå¤±`\n                this.userForm.props.form.resetFields\n              , 500)\n            })\n          }}\n          {...footer}\n          width={600}\n        >\n          <UserForms\n            userInfo={this.state.userInfo}\n            type={this.state.type}\n            wrappedComponentRef={(inst) => {this.userForm = inst}} />\n        </Modal>\n\n      </div>\n    )\n  }\n}\n\nclass UserForm extends React.Component {\n  render() {\n    const { getFieldDecorator } = this.props.form\n    let type = this.props.type\n    let userInfo = this.props.userInfo || {}\n    // å¦‚æœæ˜¯æ°´å¹³å¸ƒå±€ å°±éœ€è¦ç”¨åˆ°æ …æ ¼å¸ƒå±€\n    const formItemLayout = {\n      labelCol: {span: 5},\n      wrapperCol: {span: 15}\n    }\n    return (\n      <Form layout='horizontal'>\n        <FormItem label='ç”¨æˆ·å' {...formItemLayout}>\n          {\n            type === 'detail' ? userInfo.username :\n            getFieldDecorator('username', {\n              initialValue: userInfo.username\n            })(\n              <Input\n                type='text'\n                placeholder='è¯·è¾“å…¥ç”¨æˆ·å'\n              />\n            )\n          }\n        </FormItem>\n        <FormItem label='æ€§åˆ«' {...formItemLayout}>\n          {\n            type === 'detail' ? userInfo.sex :\n            getFieldDecorator('sex', {\n              initialValue: userInfo.sex\n            })(\n              <RadioGroup>\n                <Radio value={1}>ç”·</Radio>\n                <Radio value={2}>å¥³</Radio>\n              </RadioGroup>\n            )\n          }\n        </FormItem>\n        <FormItem label='çŠ¶æ€' {...formItemLayout}>\n          {\n            type === 'detail' ? userInfo.state :\n              getFieldDecorator('state', {\n              initialValue: userInfo.state\n            })(\n              <Select>\n                <Option value={1}>ğŸ¤</Option>\n                <Option value={2}>ğŸ¢</Option>\n                <Option value={3}>ğŸ’</Option>\n              </Select>\n            )\n          }\n        </FormItem>\n        <FormItem label='ç”Ÿæ—¥' {...formItemLayout}>\n          {\n            type === 'detail' ? userInfo.birthday :\n              getFieldDecorator('birthday', {\n              initialValue: moment(userInfo.birthday)\n            })(\n              <DatePicker/>\n            )\n          }\n        </FormItem>\n        <FormItem label='è”ç³»åœ°å€' {...formItemLayout}>\n          {\n            type === 'detail' ? userInfo.address :\n              getFieldDecorator('address', {\n              initialValue: userInfo.address\n            })(\n              <TextArea rows={3} placeholder='è¯·è¾“å…¥è”ç³»åœ°å€' />\n            )\n          }\n        </FormItem>\n      </Form>\n    )\n  }\n}\n\nconst UserForms = Form.create()(UserForm)\n"]},"metadata":{},"sourceType":"module"}