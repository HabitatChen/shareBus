{"ast":null,"code":"var _jsxFileName = \"/Users/habitat/Desktop/share-bus/src/page/order/index.js\";\nimport React from 'react';\nimport { Modal, DatePicker, Button, Card, Form, Select, Table } from 'antd';\nimport Utils from \"../../utils/utils\";\nimport axios from '../../axios';\nimport BaseForm from '../../components/baseform';\nimport LearnForm from '../../components/baseform/learn-1';\nconst FormItem = Form.Item;\nconst Option = Select.Option;\n\nclass Order extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      list: [],\n      pagination: {},\n      selectedRowKeys: '',\n      selectedRowItem: {},\n      selectedIds: '',\n      selectedRows: []\n    };\n    this.params = {\n      page: 1\n    };\n    this.formList = [{\n      type: 'SELECT',\n      label: '城市',\n      field: 'city_id',\n      placeholder: '全部',\n      width: 100,\n      initialValue: '1',\n      list: [{\n        id: '0',\n        name: '全部'\n      }, {\n        id: '1',\n        name: '北京'\n      }, {\n        id: '2',\n        name: '天津'\n      }, {\n        id: '3',\n        name: '杭州'\n      }]\n    }, {\n      type: '时间查询'\n    }, {\n      type: 'SELECT',\n      label: '订单状态',\n      field: 'state',\n      placeholder: '全部',\n      width: 100,\n      initialValue: '1',\n      list: [{\n        id: '0',\n        name: '全部'\n      }, {\n        id: '1',\n        name: '进行中'\n      }, {\n        id: '2',\n        name: '结束行程'\n      }]\n    }];\n\n    this.handleFilter = params => {\n      let _this = this;\n\n      this.params = Object.assign({}, _this.params, params);\n      this.requestList(this.params);\n    };\n\n    this.openOrderDetail = () => {\n      let item = this.state.selectedRowItem;\n\n      if (!item.id) {\n        Modal.info({\n          title: '信息',\n          content: '请选择一条订单'\n        });\n        return;\n      }\n\n      window.open(\"#/common/order/detail/\".concat(item.id), '_blank');\n    };\n\n    this.onRowClick = (record, index) => {\n      let selectedRowKeys = [index];\n      this.setState({\n        selectedRowKeys,\n        selectedRowItem: record\n      });\n    };\n\n    this.requestList = params => {\n      const _this = this;\n\n      axios.ajax({\n        url: '/order/list',\n        data: {\n          params\n        }\n      }).then(res => {\n        if (res.code == 0) {\n          let list = res.result.item_list.map((item, index) => {\n            item.key = index;\n            return item;\n          });\n          this.setState({\n            list: list,\n            pagination: Utils.pagination(res, current => {\n              _this.params.page = current;\n\n              _this.requestList();\n            })\n          });\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.requestList();\n  }\n\n  render() {\n    const columns = [{\n      title: '订单编号',\n      dataIndex: 'order_sn'\n    }, {\n      title: '车辆编号',\n      dataIndex: 'bike_sn'\n    }, {\n      title: '用户名',\n      dataIndex: 'user_name'\n    }, {\n      title: '手机号',\n      dataIndex: 'mobile'\n    }, {\n      title: '里程',\n      dataIndex: 'distance'\n    }, {\n      title: '行驶时长',\n      dataIndex: 'total_time'\n    }, {\n      title: '状态',\n      dataIndex: 'status'\n    }, {\n      title: '开始时间',\n      dataIndex: 'start_time'\n    }, {\n      title: '结束时间',\n      dataIndex: 'end_time'\n    }, {\n      title: '订单金额',\n      dataIndex: 'total_fee'\n    }, {\n      title: '实付金额',\n      dataIndex: 'user_pay'\n    }];\n    const rowSelection = {\n      type: 'radio',\n      selectedRowKeys: this.state.selectedRowKeys,\n      onChange: (selectedRowKeys, selectedRows) => {\n        let ids = [];\n        selectedRows.map(item => {\n          ids.push(item.id);\n        });\n        this.setState({\n          selectedRowKeys,\n          // 这个是必须的\n          selectedIds: ids,\n          // 附加的\n          selectedRows: selectedRows // 多选时 把选中的所有数据存起来 方便管理 onRow 会存单条数据\n\n        });\n      }\n    };\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(LearnForm, {\n      filterSubmit: this.handleFilter,\n      formList: this.formList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    })), React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.openOrderDetail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"\\u8BA2\\u5355\\u8BE6\\u60C5\"), React.createElement(Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"\\u7ED3\\u675F\\u8BA2\\u5355\")), React.createElement(\"div\", {\n      className: \"content-wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(Table, {\n      bordered: true,\n      columns: columns,\n      dataSource: this.state.list,\n      pagination: this.state.pagination,\n      rowSelection: rowSelection,\n      onRow: (record, index) => {\n        return {\n          onClick: () => {\n            // row 当前行被点击之后的回调\n            this.onRowClick(record, index);\n          }\n        };\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Order;\n\nclass FilterFormsss extends React.Component {\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(Form, {\n      layout: \"inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(FormItem, {\n      width: 300,\n      label: \"\\u57CE\\u5E02\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, getFieldDecorator('city', {\n      initialValue: ''\n    })(React.createElement(Select, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(Option, {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, \" \\u5168\\u90E8 \"), React.createElement(Option, {\n      value: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, \" \\u5317\\u4EAC \"), React.createElement(Option, {\n      value: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \" \\u5929\\u6D25 \")))), React.createElement(FormItem, {\n      width: 300,\n      label: \"\\u8BA2\\u5355\\u72B6\\u6001\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, getFieldDecorator('state', {\n      initialValue: ''\n    })(React.createElement(Select, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(Option, {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, \" \\u5168\\u90E8 \"), React.createElement(Option, {\n      value: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, \" \\u8FDB\\u884C\\u4E2D \"), React.createElement(Option, {\n      value: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, \" \\u7ED3\\u675F\\u884C\\u7A0B \")))), React.createElement(FormItem, {\n      width: 200,\n      label: \"\\u8BA2\\u5355\\u65F6\\u95F4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, getFieldDecorator('start_time', {})(React.createElement(DatePicker, {\n      showTime: true,\n      format: \"YYYY-MM-DD HH:mm:ss\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }))), React.createElement(FormItem, {\n      width: 200,\n      label: \"~\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, getFieldDecorator('end_time', {})(React.createElement(DatePicker, {\n      showTime: true,\n      format: \"YYYY-MM-DD HH:mm:ss\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }))), React.createElement(FormItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, \"\\u67E5\\u8BE2\"), React.createElement(Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, \"\\u91CD\\u7F6E\"))));\n  }\n\n}\n\nconst FilterForms = Form.create()(FilterFormsss);","map":{"version":3,"sources":["/Users/habitat/Desktop/share-bus/src/page/order/index.js"],"names":["React","Modal","DatePicker","Button","Card","Form","Select","Table","Utils","axios","BaseForm","LearnForm","FormItem","Item","Option","Order","Component","state","list","pagination","selectedRowKeys","selectedRowItem","selectedIds","selectedRows","params","page","formList","type","label","field","placeholder","width","initialValue","id","name","handleFilter","_this","Object","assign","requestList","openOrderDetail","item","info","title","content","window","open","onRowClick","record","index","setState","ajax","url","data","then","res","code","result","item_list","map","key","current","componentDidMount","render","columns","dataIndex","rowSelection","onChange","ids","push","onClick","FilterFormsss","getFieldDecorator","props","form","FilterForms","create"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {Modal, DatePicker, Button, Card, Form, Select, Table} from 'antd'\nimport Utils from \"../../utils/utils\"\nimport axios from '../../axios'\nimport BaseForm from '../../components/baseform'\nimport LearnForm from '../../components/baseform/learn-1'\n\nconst FormItem = Form.Item\nconst Option = Select.Option\n\nclass Order extends React.Component {\n\n  state = {\n    list: [],\n    pagination: {},\n    selectedRowKeys: '',\n    selectedRowItem: {},\n    selectedIds: '',\n    selectedRows: []\n  }\n\n  params = {\n    page: 1\n  }\n\n  formList = [\n    {\n      type: 'SELECT',\n      label: '城市',\n      field: 'city_id',\n      placeholder: '全部',\n      width: 100,\n      initialValue: '1',\n      list: [\n        {id: '0', name: '全部'},\n        {id: '1', name: '北京'},\n        {id: '2', name: '天津'},\n        {id: '3', name: '杭州'}\n      ]\n    },\n    {\n      type: '时间查询',\n    },\n    {\n      type: 'SELECT',\n      label: '订单状态',\n      field: 'state',\n      placeholder: '全部',\n      width: 100,\n      initialValue: '1',\n      list: [\n        {id: '0', name: '全部'},\n        {id: '1', name: '进行中'},\n        {id: '2', name: '结束行程'},\n      ]\n    }\n  ]\n\n  componentDidMount() {\n    this.requestList()\n  }\n\n  handleFilter = (params) => {\n    let _this = this\n    this.params = Object.assign({}, _this.params, params)\n    this.requestList(this.params)\n  }\n\n  // 订单详情\n  openOrderDetail = () => {\n    let item = this.state.selectedRowItem\n    if (!item.id) {\n      Modal.info({\n        title: '信息',\n        content: '请选择一条订单'\n      })\n      return\n    }\n    window.open(`#/common/order/detail/${item.id}`, '_blank')\n  }\n\n  // 表格单行点击\n  // 作用： 1.存该条数据 selectedItem,\n  // 2. selectedId ==> 对应 rowSelection 中的 selectedRowKeys\n  onRowClick = (record, index) => {\n    let selectedRowKeys = [index]\n    this.setState({\n      selectedRowKeys,\n      selectedRowItem: record\n    })\n  }\n\n  requestList = (params) => {\n    const _this = this\n    axios.ajax({\n      url: '/order/list',\n      data: {\n        params\n      }\n    }).then(res => {\n      if (res.code == 0) {\n        let list = res.result.item_list.map((item, index) => {\n          item.key = index\n          return item\n        })\n        this.setState({\n          list: list,\n          pagination: Utils.pagination(res, (current) => {\n            _this.params.page = current\n            _this.requestList()\n          })\n        })\n      }\n    })\n\n  }\n\n  render() {\n    const columns = [\n      {\n        title: '订单编号',\n        dataIndex: 'order_sn'\n      },\n      {\n        title: '车辆编号',\n        dataIndex: 'bike_sn'\n      },\n      {\n        title: '用户名',\n        dataIndex: 'user_name',\n      },\n      {\n        title: '手机号',\n        dataIndex: 'mobile',\n      },\n      {\n        title: '里程',\n        dataIndex: 'distance'\n      },\n      {\n        title: '行驶时长',\n        dataIndex: 'total_time',\n      },\n      {\n        title: '状态',\n        dataIndex: 'status',\n      },\n      {\n        title: '开始时间',\n        dataIndex: 'start_time',\n      },\n      {\n        title: '结束时间',\n        dataIndex: 'end_time'\n      },\n      {\n        title: '订单金额',\n        dataIndex: 'total_fee'\n      },\n      {\n        title: '实付金额',\n        dataIndex: 'user_pay'\n      }\n      ]\n    const rowSelection = {\n      type: 'radio',\n      selectedRowKeys: this.state.selectedRowKeys,\n      onChange: (selectedRowKeys, selectedRows) => {\n        let ids = []\n        selectedRows.map(item => {\n          ids.push(item.id)\n        })\n        this.setState({\n          selectedRowKeys, // 这个是必须的\n          selectedIds: ids, // 附加的\n          selectedRows: selectedRows // 多选时 把选中的所有数据存起来 方便管理 onRow 会存单条数据\n        })\n      }\n    }\n    return (\n      <div>\n        <Card>\n          <LearnForm\n            filterSubmit={this.handleFilter}\n            formList={this.formList}\n          />\n\n        </Card>\n        <Card>\n          <Button onClick={this.openOrderDetail}>订单详情</Button>\n          <Button>结束订单</Button>\n        </Card>\n        <div className='content-wrap'>\n          <Table\n            bordered\n            columns={columns}\n            dataSource={this.state.list}\n            pagination={this.state.pagination}\n            rowSelection={rowSelection}\n            onRow={(record, index) => {\n              return {\n                onClick: () => { // row 当前行被点击之后的回调\n                  this.onRowClick(record, index)\n                }\n              }\n            }}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Order\n\nclass FilterFormsss extends React.Component {\n  render() {\n    const {getFieldDecorator} = this.props.form\n    return (\n      <div>\n        <Form layout=\"inline\">\n          <FormItem width={300} label='城市'>\n            {\n              getFieldDecorator('city', {\n                initialValue: ''\n              })(\n                <Select>\n                  <Option value=''> 全部 </Option>\n                  <Option value='1'> 北京 </Option>\n                  <Option value='2'> 天津 </Option>\n                </Select>\n              )\n            }\n          </FormItem>\n          <FormItem width={300} label='订单状态'>\n            {\n              getFieldDecorator('state', {\n                initialValue: ''\n              })(\n                <Select>\n                  <Option value=''> 全部 </Option>\n                  <Option value='1'> 进行中 </Option>\n                  <Option value='2'> 结束行程 </Option>\n                </Select>\n              )\n            }\n          </FormItem>\n          <FormItem width={200} label='订单时间'>\n            {\n              getFieldDecorator('start_time', {\n              })(\n                <DatePicker showTime format='YYYY-MM-DD HH:mm:ss'/>\n              )\n            }\n          </FormItem>\n          <FormItem width={200} label='~'>\n            {\n              getFieldDecorator('end_time', {\n              })(\n                <DatePicker showTime format='YYYY-MM-DD HH:mm:ss'/>\n              )\n            }\n          </FormItem>\n          <FormItem>\n            <Button type='primary'>查询</Button>\n            <Button>重置</Button>\n          </FormItem>\n        </Form>\n      </div>\n    )\n  }\n}\n\nconst FilterForms = Form.create()(FilterFormsss)\n\n"]},"metadata":{},"sourceType":"module"}