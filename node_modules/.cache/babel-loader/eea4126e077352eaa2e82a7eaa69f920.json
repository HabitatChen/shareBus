{"ast":null,"code":"var _jsxFileName = \"/Users/habitat/Desktop/share-bus/src/page/order/detail.js\";\nimport React from 'react';\nimport { Card } from 'antd';\nimport axios from '../../axios';\nimport './detail.less';\nexport default class Details extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      orderInfo: {}\n    };\n\n    this.renderMap = res => {\n      this.map = new window.BMap.Map(\"orderDetailMap\");\n      this.map.centerAndZoom('北京', 11);\n      this.addMapControl();\n      this.drawBikeRoute(res.position_list);\n    };\n\n    this.addMapControl = res => {\n      let map = this.map;\n      map.addControl(new window.BMap.ScaleControl({\n        anchor: window.BMAP_ANCHOR_TOP_LEFT\n      }));\n      map.addControl(new window.BMap.NavigationControl({\n        anchor: window.BMAP_ANCHOR_TOP_LEFT\n      }));\n    };\n\n    this.request = orderId => {\n      axios.ajax({\n        url: '/order/detail',\n        data: {\n          params: {\n            orderId\n          }\n        }\n      }).then(res => {\n        if (res.code == 0) {\n          this.setState({\n            orderInfo: res.result\n          });\n          this.renderMap(res.result);\n        }\n      });\n    };\n\n    this.drawBikeRoute = pointList => {\n      let map = this.map;\n      let startPoint = '';\n      let endPoint = '';\n\n      if (pointList.length > 0) {\n        let first = pointList[0];\n        let last = pointList[pointList.length - 1];\n        startPoint = new window.BMap.Point(first.lon, first.lat);\n        let startIcon = new window.BMap.Icon('/assets/start_point.png', new window.BMap.Size(36, 42), {\n          imageSize: new window.BMap.Size(36, 42),\n          anchor: new window.BMap.Size(36, 42)\n        });\n        let startMaker = new window.BMap.Marker(startPoint, {\n          icon: startIcon\n        });\n        this.map.addOverlay(startMaker);\n        endPoint = new window.BMap.Point(last.lon, last.lat);\n        let endIcon = new window.BMap.Icon('/assets/end_point.png', new window.BMap.Size(36, 42), {\n          imageSize: new window.BMap.Size(36, 42),\n          anchor: new window.BMap.Size(36, 42)\n        });\n        let endMaker = new window.BMap.Marker(endPoint, {\n          icon: endIcon\n        });\n        this.map.addOverlay(endMaker); // 连接路线图\n\n        let trackPoint = [];\n\n        for (let i = 0; i < pointList.length; i++) {\n          let point = pointList[i];\n          trackPoint.push(new window.BMap.Point(point.lon, point.lat));\n        } // 画线\n\n\n        let polyline = new window.BMap.Polyline(trackPoint, {\n          strokeColor: '#1869ad',\n          strokeWeight: 3,\n          strokeOpacity: 1\n        });\n        this.map.addOverlay(polyline);\n        this.map.centerAndZoom(endPoint, 11);\n      }\n    };\n  }\n\n  componentDidMount() {\n    let orderId = this.props.match.params.orderId; // 获取动态路由的ID\n\n    if (orderId) {\n      this.request(orderId);\n    }\n  }\n\n  render() {\n    const info = this.state.orderInfo || {};\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"orderDetailMap\",\n      className: \"order-map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \" \"), React.createElement(\"div\", {\n      className: \"detail-items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"item-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \" \\u57FA\\u7840\\u4FE1\\u606F \"), React.createElement(\"ul\", {\n      className: \"detail-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \" \\u7528\\u8F66\\u6A21\\u5F0F \"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, info.name == 1 ? '服务区' : '停车点')), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \" \\u8BA2\\u5355\\u7F16\\u53F7 \"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, info.order_sn)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \" \\u8F66\\u8F86\\u7F16\\u53F7 \"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, info.bike_sn)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \" \\u7528\\u6237\\u59D3\\u540D \"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, info.user_name)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \" \\u624B\\u673A\\u53F7 \"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, info.mobile)))), React.createElement(\"div\", {\n      className: \"detail-items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"item-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \" \\u884C\\u9A76\\u8F68\\u8FF9 \"), React.createElement(\"ul\", {\n      className: \"detail-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \" \\u884C\\u7A0B\\u8D77\\u70B9 \"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, info.start_location)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \" \\u884C\\u7A0B\\u7EC8\\u70B9 \"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, info.end_location)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \" \\u884C\\u9A76\\u91CC\\u7A0B \"), React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, info.distance / 1000))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/habitat/Desktop/share-bus/src/page/order/detail.js"],"names":["React","Card","axios","Details","Component","state","orderInfo","renderMap","res","map","window","BMap","Map","centerAndZoom","addMapControl","drawBikeRoute","position_list","addControl","ScaleControl","anchor","BMAP_ANCHOR_TOP_LEFT","NavigationControl","request","orderId","ajax","url","data","params","then","code","setState","result","pointList","startPoint","endPoint","length","first","last","Point","lon","lat","startIcon","Icon","Size","imageSize","startMaker","Marker","icon","addOverlay","endIcon","endMaker","trackPoint","i","point","push","polyline","Polyline","strokeColor","strokeWeight","strokeOpacity","componentDidMount","props","match","render","info","name","order_sn","bike_sn","user_name","mobile","start_location","end_location","distance"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {Card} from 'antd'\nimport axios from '../../axios'\nimport './detail.less'\n\nexport default class Details extends React.Component {\n\n  state = {\n    orderInfo: {}\n  }\n\n  componentDidMount() {\n    let orderId = this.props.match.params.orderId  // 获取动态路由的ID\n    if  (orderId) {\n      this.request(orderId)\n    }\n  }\n\n  renderMap = (res) => {\n    this.map = new window.BMap.Map(\"orderDetailMap\");\n    this.map.centerAndZoom( '北京', 11);\n    this.addMapControl()\n    this.drawBikeRoute(res.position_list)\n  }\n\n  // 添加地图控件\n  addMapControl = (res) => {\n    let map = this.map\n    map.addControl(new window.BMap.ScaleControl({anchor: window.BMAP_ANCHOR_TOP_LEFT}))\n    map.addControl(new window.BMap.NavigationControl({anchor: window.BMAP_ANCHOR_TOP_LEFT}))\n  }\n\n\n  request = (orderId) => {\n    axios.ajax({\n      url: '/order/detail',\n      data: {\n        params: {\n          orderId\n        }\n      }\n    }).then((res) => {\n      if (res.code == 0) {\n        this.setState({\n          orderInfo: res.result\n        })\n        this.renderMap(res.result)\n      }\n    })\n\n  }\n\n  // 绘制用户的行驶路线\n  drawBikeRoute = (pointList) => {\n    let map = this.map\n    let startPoint = ''\n    let endPoint = ''\n    if (pointList.length > 0) {\n      let first = pointList[0]\n      let last = pointList[pointList.length - 1]\n      startPoint = new window.BMap.Point(first.lon, first.lat)\n      let startIcon = new window.BMap.Icon('/assets/start_point.png', new window.BMap.Size(36, 42), {\n        imageSize:  new window.BMap.Size(36, 42),\n        anchor: new window.BMap.Size(36, 42)\n      })\n      let startMaker = new window.BMap.Marker(startPoint, {icon: startIcon})\n      this.map.addOverlay(startMaker)\n\n      endPoint = new window.BMap.Point(last.lon, last.lat)\n      let endIcon = new window.BMap.Icon('/assets/end_point.png', new window.BMap.Size(36, 42), {\n        imageSize:  new window.BMap.Size(36, 42),\n        anchor: new window.BMap.Size(36, 42)\n      })\n      let endMaker = new window.BMap.Marker(endPoint, {icon: endIcon})\n      this.map.addOverlay(endMaker)\n\n      // 连接路线图\n      let trackPoint = [];\n      for (let i = 0; i < pointList.length; i ++) {\n        let point = pointList[i]\n        trackPoint.push(new window.BMap.Point(point.lon, point.lat))\n      }\n\n      // 画线\n      let polyline = new window.BMap.Polyline(trackPoint, {\n        strokeColor: '#1869ad',\n        strokeWeight: 3,\n        strokeOpacity: 1\n      })\n\n      this.map.addOverlay(polyline)\n\n      this.map.centerAndZoom( endPoint, 11);\n    }\n\n  }\n\n  render() {\n    const info = this.state.orderInfo || {}\n    return (\n      <div>\n        <Card>\n          <div id='orderDetailMap' className='order-map'> </div>\n          <div className=\"detail-items\">\n            <div className=\"item-title\"> 基础信息 </div>\n            <ul className=\"detail-list\">\n              <li>\n                <div className=\"detail-form-left\"> 用车模式 </div>\n                <div className=\"detail-form-content\">{info.name == 1 ? '服务区' : '停车点'}</div>\n              </li>\n              <li>\n                <div className=\"detail-form-left\"> 订单编号 </div>\n                <div className=\"detail-form-content\">{info.order_sn}</div>\n              </li>\n              <li>\n                <div className=\"detail-form-left\"> 车辆编号 </div>\n                <div className=\"detail-form-content\">{info.bike_sn}</div>\n              </li>\n              <li>\n                <div className=\"detail-form-left\"> 用户姓名 </div>\n                <div className=\"detail-form-content\">{info.user_name}</div>\n              </li><li>\n              <div className=\"detail-form-left\"> 手机号 </div>\n              <div className=\"detail-form-content\">{info.mobile}</div>\n            </li>\n            </ul>\n          </div>\n          <div className=\"detail-items\">\n            <div className=\"item-title\"> 行驶轨迹 </div>\n            <ul className=\"detail-list\">\n              <li>\n                <div className=\"detail-form-left\"> 行程起点 </div>\n                <div className=\"detail-form-content\">{info.start_location}</div>\n              </li>\n              <li>\n                <div className=\"detail-form-left\"> 行程终点 </div>\n                <div className=\"detail-form-content\">{info.end_location}</div>\n              </li>\n              <li>\n                <div className=\"detail-form-left\"> 行驶里程 </div>\n                <div className=\"detail-form-content\">{info.distance / 1000}</div>\n              </li>\n            </ul>\n          </div>\n        </Card>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}